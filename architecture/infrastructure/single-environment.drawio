<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2024-01-01T00:00:00.000Z" agent="Architecture Template" version="22.0.0" type="device">
  <diagram name="Single Environment" id="single-env">
    <mxGraphModel dx="1200" dy="700" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="Single Environment Deployment (Development / Small Production)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="250" y="20" width="600" height="30" as="geometry" />
        </mxCell>

        <!-- Internet -->
        <mxCell id="internet" value="Internet" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;fillColor=#fed7aa;strokeColor=#f97316;" vertex="1" parent="1">
          <mxGeometry x="450" y="60" width="120" height="60" as="geometry" />
        </mxCell>

        <!-- Main Environment Container -->
        <mxCell id="env" value="Single Environment (Cloud / On-Premise)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;fontStyle=1;startSize=30;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="140" width="920" height="650" as="geometry" />
        </mxCell>

        <!-- Load Balancer Section -->
        <mxCell id="lb-section" value="Load Balancing" style="swimlane;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#3b82f6;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="20" y="40" width="880" height="100" as="geometry" />
        </mxCell>

        <mxCell id="lb" value="Load Balancer&#xa;(Nginx / HAProxy)&#xa;2 CPU / 4GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dbeafe;strokeColor=#3b82f6;" vertex="1" parent="lb-section">
          <mxGeometry x="360" y="30" width="160" height="60" as="geometry" />
        </mxCell>

        <!-- Application Section -->
        <mxCell id="app-section" value="Application Servers" style="swimlane;whiteSpace=wrap;html=1;fillColor=#e9d5ff;strokeColor=#8b5cf6;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="20" y="160" width="880" height="130" as="geometry" />
        </mxCell>

        <mxCell id="app1" value="App Server 1&#xa;(API + Services)&#xa;4 CPU / 8GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d5ff;strokeColor=#8b5cf6;" vertex="1" parent="app-section">
          <mxGeometry x="180" y="40" width="140" height="70" as="geometry" />
        </mxCell>

        <mxCell id="app2" value="App Server 2&#xa;(API + Services)&#xa;4 CPU / 8GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d5ff;strokeColor=#8b5cf6;" vertex="1" parent="app-section">
          <mxGeometry x="370" y="40" width="140" height="70" as="geometry" />
        </mxCell>

        <mxCell id="worker" value="Worker Server&#xa;(Background Jobs)&#xa;2 CPU / 4GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e9d5ff;strokeColor=#8b5cf6;" vertex="1" parent="app-section">
          <mxGeometry x="560" y="40" width="140" height="70" as="geometry" />
        </mxCell>

        <!-- Database Section -->
        <mxCell id="db-section" value="Database" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#10b981;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="20" y="310" width="430" height="150" as="geometry" />
        </mxCell>

        <mxCell id="db-primary" value="PostgreSQL&#xa;Primary&#xa;4 CPU / 16GB / 200GB SSD" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#336791;strokeColor=#1e4a6e;fontColor=#ffffff;" vertex="1" parent="db-section">
          <mxGeometry x="50" y="40" width="140" height="100" as="geometry" />
        </mxCell>

        <mxCell id="db-replica" value="PostgreSQL&#xa;Replica&#xa;4 CPU / 16GB / 200GB SSD" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d1fae5;strokeColor=#10b981;" vertex="1" parent="db-section">
          <mxGeometry x="240" y="40" width="140" height="100" as="geometry" />
        </mxCell>

        <mxCell id="repl-arrow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#059669;strokeWidth=3;" edge="1" parent="db-section" source="db-primary" target="db-replica">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Cache Section -->
        <mxCell id="cache-section" value="Cache &amp; Queue" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#f59e0b;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="470" y="310" width="430" height="150" as="geometry" />
        </mxCell>

        <mxCell id="redis" value="Redis&#xa;(Cache + Queue)&#xa;2 CPU / 8GB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dc382d;strokeColor=#a52a2a;fontColor=#ffffff;" vertex="1" parent="cache-section">
          <mxGeometry x="50" y="40" width="130" height="90" as="geometry" />
        </mxCell>

        <mxCell id="mq" value="RabbitMQ&#xa;(Message Queue)&#xa;2 CPU / 4GB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fce7f3;strokeColor=#ec4899;" vertex="1" parent="cache-section">
          <mxGeometry x="230" y="40" width="130" height="90" as="geometry" />
        </mxCell>

        <!-- Storage Section -->
        <mxCell id="storage-section" value="Storage &amp; Search" style="swimlane;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#10b981;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="20" y="480" width="430" height="140" as="geometry" />
        </mxCell>

        <mxCell id="storage" value="Object Storage&#xa;(S3 / MinIO)&#xa;500GB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#d1fae5;strokeColor=#10b981;" vertex="1" parent="storage-section">
          <mxGeometry x="50" y="35" width="130" height="90" as="geometry" />
        </mxCell>

        <mxCell id="search" value="Elasticsearch&#xa;(Single Node)&#xa;4 CPU / 8GB" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#fed10a;strokeColor=#d4a90a;" vertex="1" parent="storage-section">
          <mxGeometry x="230" y="35" width="130" height="90" as="geometry" />
        </mxCell>

        <!-- Monitoring Section -->
        <mxCell id="monitoring-section" value="Monitoring" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;startSize=25;" vertex="1" parent="env">
          <mxGeometry x="470" y="480" width="430" height="140" as="geometry" />
        </mxCell>

        <mxCell id="prometheus" value="Prometheus&#xa;(Metrics)&#xa;2 CPU / 4GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;" vertex="1" parent="monitoring-section">
          <mxGeometry x="30" y="40" width="110" height="70" as="geometry" />
        </mxCell>

        <mxCell id="grafana" value="Grafana&#xa;(Dashboards)&#xa;1 CPU / 2GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;" vertex="1" parent="monitoring-section">
          <mxGeometry x="160" y="40" width="110" height="70" as="geometry" />
        </mxCell>

        <mxCell id="loki" value="Loki&#xa;(Logs)&#xa;2 CPU / 4GB" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;" vertex="1" parent="monitoring-section">
          <mxGeometry x="290" y="40" width="110" height="70" as="geometry" />
        </mxCell>

        <!-- Internet connection -->
        <mxCell id="inet-conn" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#9ca3af;strokeWidth=2;dashed=1;" edge="1" parent="1" source="internet" target="lb">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Resource Summary -->
        <mxCell id="summary" value="" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f1f5f9;strokeColor=#64748b;startSize=0;rounded=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="810" width="920" height="80" as="geometry" />
        </mxCell>

        <mxCell id="sum-title" value="Resource Summary" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1;" vertex="1" parent="summary">
          <mxGeometry x="10" y="10" width="120" height="20" as="geometry" />
        </mxCell>

        <mxCell id="sum-text" value="Total: 8 Servers | 28 CPU | 64GB RAM | ~1TB Storage | Est. Cost: $500-1000/month (cloud)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="summary">
          <mxGeometry x="10" y="35" width="600" height="20" as="geometry" />
        </mxCell>

        <mxCell id="sum-use" value="Recommended for: Development, Staging, Small Production (&lt;1000 concurrent users)" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="summary">
          <mxGeometry x="10" y="55" width="500" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
